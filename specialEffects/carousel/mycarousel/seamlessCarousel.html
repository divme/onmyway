<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>seamlessCarousel</title>
		<link rel="stylesheet" href="css/public.css" />
		<style>
			*  {margin:0;padding:0;}
			html,body{height:100%;}
			.wrapper{position:relative;height:100%;overflow:hidden;background:#f9f9f9;}

			.container{position:absolute;top:0;left:0;height:100%;overflow:hidden;}
			.inner-container{float:left;height:100%;background:yellowgreen;color:steelblue;font-size:40px;text-align:center;}
			 .o{background:mediumaquamarine url(img/1.png)  no-repeat center center;}
			 .oo{background:lightyellow  url(img/2.png)  no-repeat center center;}
			.ooo{background:lightgoldenrodyellow url(img/3.png)  no-repeat center center;}
			.oooo{background:yellowgreen url(img/4.png)  no-repeat center center;}
			.btns{position:absolute;left:50%;bottom:50px;width:120px;height:10px;margin-left:-60px;}
			.btn{float:left; width:20px;height:20px;border-radius:50%;background:red;margin-left: 5px;}
			.on{background:yellow;}
			.prenext{width: 60px;height: 120px;position: absolute;top: 100px;background: skyblue;}
			.left{left: 0;top:40%;}
			.right{right: 0; top: 40%}
		</style>
	</head>
	<body>

	<div class="wrapper">
		<div class="container">
			<div class="inner-container o" target="1">第一页</div>
			<div class="inner-container oo" target="2">第二页</div>
			<div class="inner-container ooo" target="3">第三页</div>
			<div class="inner-container oooo" target="4">第四页</div>
		</div>

	</div>

	<!--<script src="js/seamlessCarouselJs.js"></script>-->

	<script src="js/jquery-2.1.1.min.js"></script>
	<!--<script src="js/seamlessCarouselJq.js"></script>-->


	<script>
		$(function(){
			var width = window.innerWidth,
				height = window.innerHeight,
				$wrapper = $('.wrapper'),
				$con  = $('.container'),
//				这两个要变的
				$inner = $(".inner-container"),
				count1 = $inner.length,

				index = 0,
				Timer;


//          添加控制器和左右按钮
			var btn = "<div class='btns' id='icon'>";
			for(var i = 0 ; i < count1 ; i++){
				btn += "<span class='btn'></span>"
			}
			btn += "</div>";
			btn += "</div><div class='prenext left'></div><div class='prenext right'></div>";
			$wrapper.append(btn);

			$('.btn').eq(0).addClass('on');


//          设置宽度，前后各插入一张图片
			$inner.css({'width':width,'height':height});
			$con.prepend($inner.last().clone());
			$con.append($inner.first().clone());

			$inner = $(".inner-container");
			count2 = $inner.length;
			$con.css({'width':count2*width,'transform':'translate3d('+ (-1)*width+'px,0,0)'});

			// 基础函数
			function carousel(index){

				if(index >= count2-1){
					newleft = (count2-1)*width;
					$con.stop(stop,false).animate({'left':newleft},300,function(){
						$con.animate({'left': '0'},0)
					});
					$('.btn').stop(stop,false).eq(0).addClass('on').siblings().removeClass('on');
					return ;
				}
				if(index <= 0){
					newleft = 0;
					$con.stop(stop,false).animate({'left':newleft},300,function(){
						$con.animate({'left': (-1)*(count2-1)*width},0)
					});
					$('.btn').stop(stop,false).eq(count1-1).addClass('on').siblings().removeClass('on');
					return;
				}
				var newleft = - index * width ;
				$('.container').stop(stop,false).animate({'left':newleft},300);
				$('.btn').stop(stop,false).eq(index).addClass('on').siblings().removeClass('on');
			}

			// 自动carousel
			$wrapper.hover(function(){
				clearInterval(Timer);
			},function(){
				Timer = setInterval(function(){
					index++;
					carousel(index);
				},3000)
			});

			// 控制器和前后键
			$('#icon').on('mouseover','.btn',function(){
				index = $('.btn').index(this);
				carousel(index);
			});
			$('.left').click(function(){
				index--;
				carousel(index);
			});
			$('.right').click(function(){
				index++;
				carousel(index);
			})
		})
	</script>

	<script>
//		$(function(){
//			var width = window.innerWidth,
//				height = window.innerHeight,
//				$inner = $(".inner-container"),
//				$con  = $('.container'),
//				$wrapper = $('.wrapper'),
//				count = $inner.length,
//				index = 0,
//				Timer;
//
//			// 设置宽度
//			$inner.css({'width': width});
//			$con.css('width',count*width);
//
//			// 基础函数
//			function carousel(index){
//				var newleft = - width + 'px';
//				$con.stop(stop,false).animate({'left':newleft},300,function(){
//					$(".inner-container").first().insertAfter($(".inner-container").last());
//					$con.stop(stop,false).animate({'left':'0'},0);
//				});
//				$('.btn').stop(stop,false).eq(index).addClass('on').siblings().removeClass('on');
//			}
//
//			// 自动carousel
//			$wrapper.hover(function(){
//				clearInterval(Timer);
//			},function(){
//				Timer = setInterval(function(){
//					carousel(index);
//				},3000)
//			});
//		})
	</script>
	</body>
</html>
