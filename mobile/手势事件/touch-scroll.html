<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1 user-scalable=0"/>
    <title>touch-scroll</title>
    <style>
            * {margin: 0;  padding: 0;}
        #outer{
            width:100%;
            height:490px;
            background: #000;
            overflow: hidden;
        }
        #inner{
            position:relative;
            width:100%;
            top:0;
            padding: 30px 20px;
            background: #e4e4e4;
            font-size: 1em;
            box-sizing: border-box;
        }
        #inner p{
            line-height: 30px;
            letter-spacing: 3px;
            text-indent:2em;
        }
        #text{
            width: 100%;
            height: 40px;
            border: 1px solid red;
        }
        h2{
            width: 100%;
            text-align: center;
        }
        h3{
            width: 100%;
            padding-left:60%;
        }
    </style>
</head>
<body>
<div id="text"></div>
<div id="outer">
    <div id="inner">
        <h2>背影</h2>
        <h3>—朱自清</h3>
        <p>我与父亲不相见已二年余了，我最不能忘记的是他的背影。<br/>
            那年冬天，祖母死了，父亲的差使也交卸了，正是祸不单行的日子。我从北京到徐州，打算跟着父亲奔丧回家。到徐州见着父亲,看见满院狼藉的东西，又想起祖母，不禁簌簌地流下眼泪。父亲说：“事已如此，不必难过，好在天无绝人之路！”<br/>
            回家变卖典质，父亲还了亏空；又借钱办了丧事。这些日子，家中光景很是惨淡，一半为了丧事，一半为了父亲赋闲。丧事完毕，父亲要到南京谋事，我也要回北京念书，我们便同行。<br/>
            到南京时，有朋友约去游逛，勾留了一日；第二日上午便须渡江到浦口，下午上车北去。父亲因为事忙，本已说定不送我，叫旅馆里一个熟识的茶房陪我同去。他再三嘱咐茶房，甚是仔细。但他终于不放心，怕茶房不妥帖；颇踌躇了一会。其实我那年已二十岁，北京已来往过两三次，是没有什么要紧的了。他踌躇了一会，终于决定还是自己送我去。我再三回劝他不必去；他只说：“不要紧，他们去不好！”<br/>
            我北来后，他写了一信给我，信中说道：“我身体平安，惟膀子疼痛厉害，举箸提笔，诸多不便，大约大去之期不远矣。”我读到此处，在晶莹的泪光中，又看见那肥胖的、青布棉袍黑布马褂的背影。唉！我不知何时再能与他相见！ </p>
    </div>
</div>
<script>
    var startX,//触摸时的坐标
        startY,
            x, //滑动的距离
            y,
            aboveY = 0; // 设一个全局变量记录上一次内部块滑动的位置
    var inner = document.getElementById('inner');
    var outer = document.getElementById('outer');

    var documentHeight = inner.clientHeight;//内部滑动模块的高度
    var wapperHeight = outer.clientHeight; //外部盒子的高度

    function touchStart(e){
        var touch = e.touches[0];
            startY = touch.pageY;
        inner.style.transition = 'none';
    }

    function touchMove(e){
        e.preventDefault();
        var touch = e.touches[0];
            y = touch.pageY - startY;
            inner.style.top = aboveY + y +"px";
            document.getElementById("text").innerHTML = inner.style.top;
    }

    function touchEnd(e){
        aboveY = parseInt(inner.style.top);//touch结束后记录内部滑块滑动的位置 在全局变量中体现 一定要用parseInt()将其转化为整数字;
        inner.style.transition = '.5s';
        if(y>0 && aboveY>0){
            inner.style.top=0;
            aboveY=0;
        }

        if(y<0 && (aboveY < (-(documentHeight-wapperHeight)))){//当滑动到最底部时候不能再网下滑动
            inner.style.top=-(documentHeight-wapperHeight)+"px";
            aboveY=-(documentHeight-wapperHeight);
        }
    }
    outer.addEventListener('touchstart',touchStart,false);
    outer.addEventListener('touchmove',touchMove,false);
    outer.addEventListener('touchend',touchEnd,false);
</script>
</body>

</html>