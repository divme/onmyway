<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>面试准备</title>
    <style>
        *{margin:0;padding:0;}
        #canvas{
            position: fixed;
            display: block;
            height: 100%;
            width: 100%;
            top: 0;
            left: 0;
            margin: 0 auto;
            box-shadow:0 0 20px #000 inset,0 0 15px #101010;
            z-index: -1
        }
        h5{
            margin: 20px 0;
            text-indent: 20px;
            font-size: 18px;
            color: #f3f3f3;
            font-weight: bold;
        }
        .container {
            float: left;
            width: 50%;
        }
        .container div{
            padding: 0 50px;
        }
        .container div a{
            color: #ddd;
            line-height: 36px;
        }
    </style>
</head>
<body>
<div class="container">
    <h5>基础面试内容</h5>
    <div><a target="_blank" href="https://www.jianshu.com/p/cd3fee40ef59">波仔前端进阶基础系列17篇</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5ab83f67f265da237e09b2f6">抽象语法树 Abstract syntax tree</a></div>

    <h5>手写代码</h5>
    <div><a target="_blank" href="https://juejin.im/post/5c9c3989e51d454e3a3902b6">JavaScript手写代码无敌秘籍（11题）</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5a2a7a5051882535cd4abfce#heading-30">编写自己的代码库（代码较多，可浏览看哪些需要看一下）</a></div>

    <!--<h5>js 场景收集</h5>-->
    <!--<div><a target="_blank" href="https://juejin.im/post/5df2e8ab6fb9a0163770816d">高质量前端快照方案：页面保存为图片</a></div>-->
    <!--<div><a target="_blank" href="https://mp.weixin.qq.com/s?__biz=MzA4Nzg0MDM5Nw==&mid=2247484436&amp;idx=1&amp;sn=9cd69aabbf9c002b93d454e06ffa5774&source=41#wechat_redirect">一篇文章彻底搞定富文本原理 + 实战</a></div>-->
    <!--<div><a target="_blank" href="https://mp.weixin.qq.com/s?__biz=MzA4Nzg0MDM5Nw==&mid=2247484402&amp;idx=1&amp;sn=f8d2b3fb20b2026c7039ad8dba735048&source=41#wechat_redirect">异常监控：教你如何优雅的处理前端异常</a></div>-->

    <h5>js 情境深入</h5>
    <div><a target="_blank" href="https://juejin.im/post/5bc1ae9be51d450e8b140b0c">深拷贝的终极探索</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5b8de829f265da43623c4261">7分钟理解JS的节流、防抖及使用场景</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5decf09de51d45584d238319#heading-22">你不知道的 JSON.stringify() 的威力</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5e02110ee51d4557f046147b">如何答一道惊艳面试官的数组去重问题</a></div>

    <h5>面试题</h5>
    <div><a target="_blank" href="https://juejin.im/post/5e03fe81f265da33cd03c0fd">大厂面试中遇到的几十道 webpack 与 react 面试题</a></div>

</div>
<div class="container">
    <h5>webpack</h5>
    <div><a target="_blank" href="https://juejin.im/post/5badd0c5e51d450e4437f07a">Webpack揭秘——走向高阶前端的必经之路</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5d614dc96fb9a06ae3726b3e">Webpack优化——将你的构建效率提速翻倍</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5df884ad6fb9a0164e7f979d">Webpack 深入浅出之公司级分享总结</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5cf24bed6fb9a07ee566069c#heading-1">实现一个简单的Webpack</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5ab9f2f3f265da239b4174f0#heading-2">babel 与 babel插件介绍</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5cf4e259f265da1bd305441e">npm发包流程</a></div>
    <div><a target="_blank" href=""></a></div>

    <h5>React</h5>
    <div><a target="_blank" href="https://juejin.im/post/5b1fa77451882513ea5cc2ca">MVVM，双向绑定实现</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5c8e5e4951882545c109ae9c">让虚拟DOM和DOM-diff不再成为你的绊脚石</a></div>
    <div><a target="_blank" href="https://github.com/livoras/blog/issues/13">深度剖析：如何实现一个 Virtual DOM 算法</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5d9ca65be51d45782c23fab7">动手实现一个react-redux</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5983dfbcf265da3e2f7f32de">React源码解析(一):组件的实现与挂载</a></div>
    <div><a target="_blank" href="https://juejin.im/post/59ca03b9518825177c60d10b">React源码解析(二):组件的类型与生命周期</a></div>
    <div><a target="_blank" href="https://juejin.im/post/59cc4c4bf265da0648446ce0">React源码解析(三):详解事务与队列</a></div>
    <div><a target="_blank" href="https://juejin.im/post/5a0cf54ff265da43333df2c4">React源码解析(四):事件系统</a></div>
    <div><a target="_blank" href="https://github.com/hujiulong/blog/issues/4">从零开始实现一个React（一）：JSX和虚拟DOM</a></div>
    <div><a target="_blank" href="https://github.com/hujiulong/blog/issues/5">从零开始实现一个React（二）：组件和生命周期</a></div>
    <div><a target="_blank" href="https://github.com/hujiulong/blog/issues/6">从零开始实现一个React（三）：diff算法</a></div>
    <div><a target="_blank" href="https://github.com/hujiulong/blog/issues/7">从零开始实现一个React（四）：异步的setState</a></div>
</div>



<canvas id="canvas">粒子的连接线不够舒服；尚未添加自运动背景粒子</canvas>
<script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    var startTime = new Date().getTime();
    var stars = [];
    var freeBalls = [];
    var freeBallsMax = 200;
    var defaultStar = {
        offsetx: 50,
        offsety: 50,
        minR : 5,
        maxR : 10,
        color: 'rgba(255, 228, 225, .5)',
//          colors: 'rgba(255, 255, 255,'
        colors: 'rgba(255,192,203,',
        colors1: 'rgba(255,255,255,'
    };

    var ResizeTimer;
    var Timer;
    var lineOpacity = 0.2;

    window.requestAnimationFrame = (function() {
        return window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.oRequestAnimationFrame  ||
            window.msRequestAnimationFrame ||
            function(callback) {
                window.setTimeout(callback, 1000 / 60);
            };
    })();

    window.addEventListener("resize",resize);
    function resize(){
        if(ResizeTimer){
            clearTimeout(ResizeTimer);
        }
        ResizeTimer = setTimeout(function(){
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            renderBack();
        },300)
    }

    window.onload = function(){
        renderBack();
        init();

        Timer = setInterval(function(){
            init();
            update();
        },50);

        document.addEventListener('mousemove', mousemove);
    };

    function init(){
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        renderBack();
        renderFreeBalls();
        renderStars();
        renderLines();
//          window.requestAnimationFrame(function(){
//              init();
//              update();
//          });
    }

    //      移动出发重绘：移动到哪，哪附近产生星星
    //      还得设置一个时间间隔，超过才发生，限制事件出发的频率
    function mousemove(e){

        var x = e.clientX - canvas.getBoundingClientRect().left;
        var y = e.clientY - canvas.getBoundingClientRect().top;

        var currentTime = new Date().getTime();
        if(currentTime - startTime > 100){
            while(stars.length > 50){
                stars.shift();
            }
            addStars(x, y);
            lineOpacity = 0.2;
            startTime = currentTime;
        }
    }

    //      画背景
    function renderBack(){
        var linear = ctx.createLinearGradient(0, 0, 0, canvas.height);
        linear.addColorStop(0.2, '#424242');
        linear.addColorStop(1, '#3d5fb1');
        ctx.fillStyle = linear;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    //      添加自由球
    function renderFreeBalls(){
        if(freeBalls.length < freeBallsMax){
            var count = Math.ceil(Math.random()*8);
            for(var i = 0; i < count; i++){
                var freeball = {
                    x: Math.floor(Math.random()*canvas.width),
                    y: Math.floor(Math.random()*canvas.height),
                    vy:Math.min(Math.random(),0.3),
                    r: Math.floor(Math.random()*defaultStar.minR),
                    opacity: 0.2 + Math.floor(Math.random()*5)/10
                };
                freeBalls.push(freeball);
            }
        }
        for(var m = 0; m < freeBalls.length; m++){
            ctx.beginPath();
            drawStar(freeBalls[m].x, freeBalls[m].y, freeBalls[m].r, 0, freeBalls[m].opacity, defaultStar.colors);
        }

    }

    //      添加星星
    function addStars(currentx, currenty){
        var count = Math.ceil(Math.random()*8);
        for(var i = 0; i < count; i++){
            var star = {
                x: currentx + Math.pow(-1, Math.floor(Math.random()*100))*Math.floor(Math.random()*defaultStar.offsetx),
                y: currenty + Math.pow(-1, Math.floor(Math.random()*100))*Math.floor(Math.random()*defaultStar.offsety),
                max: currentx + defaultStar.offsetx,
                vx:Math.pow(-1, Math.floor(Math.random()*100))*Math.random(),
                r: Math.floor(defaultStar.minR + Math.random()*(defaultStar.maxR-defaultStar.minR)),
                opacity: 0.2+ Math.floor(Math.random()*5)/10
            };
            stars.push(star);
        }
    }

    //      画星星or圆
    function renderStars(){
        for(var i = 0; i < stars.length; i++){
            ctx.beginPath();
            drawStar(stars[i].x, stars[i].y, stars[i].r, 0, stars[i].opacity, defaultStar.colors);
//              ctx.arc(stars[i].x, stars[i].y, stars[i].r, 0, 2*Math.PI, false);
//              ctx.fillStyle = defaultStar.color;
//              ctx.fill();
        }
    }

    //      更新：星星位置，星星透明度， 线透明度
    function update(){
        for(var i = 0, len = stars.length; i <len; i++){
            stars[i].x += stars[i].vx;
            if(stars[i].x >= stars[i].max){
                stars[i].vx = 0;
            }
            stars[i].opacity -= 0.015;
            if(stars[i].opacity < 0.1){
                stars[i].opacity = 0;
                stars.splice(i, 1);
                len = stars.length
            }
        }
        lineOpacity -= 0.01;
        if(lineOpacity < 0){
            lineOpacity = 0;
        }
        for(var m = 0; m < freeBalls.length; m++){
            freeBalls[m].y -= freeBalls[m].vy;
            if(freeBalls[m].y <= 0){
                freeBalls.splice(m, 1)
            }
            if(freeBalls[m].opacity >= 0.4){
                freeBalls[m].opacity -= 0.01;
            }else{
                freeBalls[m].opacity += 0.01;
            }

        }

    }

    //      画连线
    function renderLines(){
        if(stars.length >=1 ){
            ctx.beginPath();
            ctx.moveTo(stars[0].x, stars[0].y);
            for(var m = 0; m < stars.length; m++){
                ctx.lineTo(stars[m].x, stars[m].y);
//
            }
            ctx.lineWidth = 1;
            ctx.strokeStyle = defaultStar.colors + lineOpacity + ')' ;
            ctx.stroke();
        }
    }

    //      画一颗五角星的方法，用了变形和状态API
    function drawStar(x, y, r, rotate, opacity, color){
        ctx.beginPath();
        ctx.save();
        ctx.translate( x, y);
        ctx.rotate(rotate/180*Math.PI);
        ctx.scale(r, r);

        for(var i = 0; i < 5; i++){
            ctx.lineTo(Math.cos((18+i*72-rotate)/180*Math.PI),
                -Math.sin((18+i*72-rotate)/180*Math.PI));
            ctx.lineTo(Math.cos((54+i*72-rotate)/180*Math.PI)*0.5,
                -Math.sin((54+i*72-rotate)/180*Math.PI)*0.5);
        }
        ctx.closePath();
        var linear = ctx.createLinearGradient(x-r, y-r, x-r, y+r);
        linear.addColorStop(0, "rgba(255, 255, 255, 0.5)");
        linear.addColorStop(1, "rgba(211, 174, 104, 0.8)");
        var radial = ctx.createRadialGradient(0, 0, 0.3*r, 0.3*r, 0, 2*r);
        radial.addColorStop(0, "white");
        radial.addColorStop(.5, "red");

//          ctx.fillStyle = linear;
//          ctx.fillStyle = radial;
//          ctx.fillStyle = "rgba(255, 255, 255, .4)";
        ctx.fillStyle = color + opacity + ')' ;
        ctx.fill();
        ctx.restore();
    }
</script>
</body>
</html>

