<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>something about javascript</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="white" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
        .mm{padding:20px;background:#f6f6f6;color:#424242}
    </style>
</head>
<body>

    <h6>js小技巧</h6>
    <script>
      var a=[-1,-1,2,2,1,-2,3,-3,-5,6];
      Array.prototype.zs=function(){
          var arr=[];
          for(var i=0;i<this.length;i++){
              var item=this[i];
              if(item<0){
                  item=0;
              }
              arr.push(item);
          }
          console.log("a="+arr);
          return arr;
      }
      a.zs();

      function f(arr,func){
        var ret=[];
        for (var i in arr){
            ret.push(func(arr[i]));
        }
        return ret;
      }
      f(a,function(n){
        return n>0?n:0;
      });

      function type(p) {
        /function.(\w*)\(\)/.test(p.constructor);
        //通过其构造函数来获取对应的类型。
        return RegExp.$1;
      }
      console.log (type(a));
      function dateformat(date){
        var h= parseInt(date/3600);
        var m= parseInt(date%3600/60);
        var s= parseInt(date%3600%60);
        return h+":"+m+":"+s;
      }
    </script>

    <h6>数组去重</h6>
    <script>
          var arrr = new Array();
         (function arr(){
             arrr=[];
             for(var i=0;i<10;i++){
                 var item=Math.floor(Math.random()*100);
                 arrr.push(item);
             }
             return arrr;
         })()
         console.log(arrr);
         Array.prototype.unique1=function(){
             var arr=[];
             for (var i=0;i<this.length;i++){
                  var item =this[i];
                  if (arr.indexOf(item) === -1){
                      arr.push(item);
                  }
             }
             return arr;
         }
         Array.prototype.unique2=function(){
             var arr = [];
             var hash = {};
             for(var i=0;i<this.length;i++){
                  var item=this[i];
                  var key=typeof(item)+item;
                  if(hash[key]!=1){
                      arr.push(item);
                      hash[key]=1;
                  }
             }
             return arr;
         }
         Array.prototype.unique3=function(){
               console.time("sort");
               this.sort();
               console.timeEnd("sort");
               var arr=[this[0]];
             for(var i=1;i<this.length;i++){
                 var item=this[i];
                 if(item!=arr[arr.length-1]){
                     arr.push(item);
                 }
             }
             return arr;
         }
         console.time("one");
           arrr.unique1();
         console.timeEnd("one");
         console.time("two");
           arrr.unique2();
         console.timeEnd("two");
         console.time("three");
           arrr.unique3();
         console.timeEnd("three");
     </script>

    <h6>BOM</h6>
    <script>

    </script>

    <h6>闭包之排序</h6>
    <script>
        var arr = [4, 5, 6, 8, 7, 9, 3, 2, 1, 0];
        var $ = function(id) { return document.getElementById(id); }
        var Sort = {
            Insert: function() {
                for (var i = 1; i < arr.length; i++) {
                    for (var j = 0; j < i; j++) {
                        if (arr[i] < arr[j]) {
                            arr[i] = [arr[j], arr[j] = arr[i]][0];
                        }
                    }
                    setTimeout(function() { $("proc").innerHTML += arr + "<br/>"; }, i * 500);
                    setTimeout((function() {
                        var m = [];
                        for (var j = 0; j < arr.length; j++) {
                            m[j] = arr[j];
                        }
                        return function() {
                            $("proc").innerHTML += m + "<br />";
                        }
                    })(), i * 500);
                    //or 写成下面这样也可以
                    /*
                     setTimeout((function(m) {
                     return function() {
                     $("proc").innerHTML += m + "<br />";
                     }
                     })(arr.join(",")), i * 500);
                     */
                }
                return arr;
            }
        }
    </script>
    <div>
        var a = [4, 5, 6, 8, 7, 9, 3, 2, 1, 0]
        <input type="button" value="插入排序" onclick="Sort.Insert();" />
    </div>
    <div id="proc"></div>

    <h6>闭包之点击</h6>
    <!--<script>-->
        <!--window.onload = function() {-->
            <!--for (var i = 1; i < 4; i++) {-->
                <!--var id = document.getElementById("a" + i);-->
                <!--id.onclick = (function(i) {-->
                    <!--return function() {-->
                        <!--console.log(i);-->
                    <!--}-->
                <!--})(i);-->
            <!--}-->
        <!--}-->
    <!--</script>-->

    <h6>闭包</h6>
    <script>
        var global=3;
        function foo(){
            var g=4;
            return function(){
               console.log(global+g);
            }
        }
        var fooo=foo();
        fooo();
    </script>

    <h6>一段DOM</h6>
    <script>
        var div=document.createElement('div');
        div.setAttribute('class','mm');
        div.innerHTML='我是DOM';
        var body=document.getElementsByTagName('body')[0];
        body.appendChild(div);
    </script>


</body>
</html>