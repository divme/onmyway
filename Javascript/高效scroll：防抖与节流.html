<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>防抖与节流</title>
    <style>
        *{margin:0;padding:0}
    </style>
</head>
<body>
<ul>
    <li>监听事件，进去就移除，处理完再添加监听事件；</li>
    <li>滚动事件，已进入清除滚动定时器，直到滚动停止达到延迟时间之上，重启滚动事件</li>
    <li>resize时，就设置延迟定时器，停止后重启resize事件</li>
    <li></li>
</ul>
<div style="height:4000px"></div>
<!--简单的防抖函数-->
<script>
//    function debounce(func, wait, immediate) {
//        // 定时器变量
//        var timeout;
//        return function() {
//            // 每次触发 scroll handler 时先清除定时器
//            clearTimeout(timeout);
//            // 指定 xx ms 后触发真正想进行的操作 handler
//            timeout = setTimeout(func, wait);
//        };
//    }
//
//    // 实际想绑定在 scroll 事件上的 handler
//    function realFunc(){
//        console.log("Success");
//    }

    // 采用了防抖动
//    window.addEventListener('scroll',debounce(realFunc,500));
</script>
<!--封装过-->
<script>
    function debounce(func, wait, immediate) {
        var timeout;
        return function() {
            var context = this, args = arguments;
            var later = function() {
                 func.apply(context, args);
            };
            var callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) func.apply(context, args);
        };
    }

    var myEfficientFn = debounce(function(e) {
        // 滚动中的真正的操作
        console.log('scroll');
    }, 250, true);

    // 绑定监听
    window.addEventListener('scroll', myEfficientFn);
</script>

<h5>事件节流：对于频繁触发而又没必要次次回应的事件，给个限制，减少触发次数P139</h5>
<script>
    function throttle(fn, interval) {
        var doing = false;

        return function() {
            if (doing) {
                return;
            }
            doing = true;
            fn.apply(this, arguments);
            setTimeout(function() {
                doing = false;
            }, interval);
        }
    }

    window.onresize = throttle(function(){
        console.log('execute');
    }, 1000);
</script>

</body>
</html>































