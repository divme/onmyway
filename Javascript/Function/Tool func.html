<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tool Func</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="white" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
       pre{
          width:500px;
          margin:10px auto;
          background:#f6f6f6;
          font-family:"Helvetica Neue",'微软雅黑', Verdana, Arial, Helvetica, sans-serif;
          font-size:14px;
          padding:10px 20px;
       }
    </style>
</head>
<body>
   <h5>给对象添加方法P13</h5>
   <pre>
       Function.prototype.method = function(name,func){
           this.prototype[name] = func;
           return this;
       }
   </pre>

   <h5>javascript小数加法精度问题P21</h5>
   <pre>
       function addTwoFloat(num1,num2){
           var result;
           var arguments = [].slice.apply(arguments);
           var arr=[];
           for(var i=0,leng=arguments.length;i < leng;i++){
               var type = typeof arguments[i],
                   instance = arguments[i] instanceof Number;
               if(type !='number' && instance == false) return NaN;
               var str = arguments[i].toString();
               var snum = str.indexOf('.');
               var newstr = str.slice(snum+1);
               arr[i]=newstr.length;
           }
           arr.sort(function(a,b){return b-a});
           result =  (num1*Math.pow(10,arr[0])+num2*Math.pow(10,arr[0]))/Math.pow(10,arr[0]);
           return result;
       }
       var num= addTwoFloat(43.95467463,0.87326);
       console.group('addTwoFloat浮点数加法')
         console.log(num);
       console.groupEnd();
   </pre>

   <h5>关于闭包P54</h5>
   <pre>
       function foo(x){
           var tmp = 3;
           return function (y){

               var memb;
               memb = memb ? memb + 1 : 1;
               console.group('闭包');
                  console.log('1'+x + y + tmp);
                  console.log(memb);
               console.groupEnd();
           }
       }
       var age = new Number(2);
       var bar = foo(age); // bar 现在是一个引用了age的闭包
       bar(10);
   </pre>

   <h5>简单偏函数典型示例P73</h5>
   <pre>
       isString = function(obj){
                     return Object.prototype.toString.call(obj) === "[object String]";
                  }
       isNumber = function(obj){
                     return Object.prototype.toString.call(obj) === "[object Number]";
                  }
       isArray = function(obj) {
                     return Object.prototype.toString.call(obj) === "[object Array]";
                 }
   </pre>
   <!--将上面三个函数变为下面的-->
   <pre>
       isType = function(type) {
           return function(obj) {
                     return Object.prototype.toString.call(obj) === "[object " + type + "]";
                  }
       }
       isString = isType('String');
       isNumber = isType('Number');
       isArray = isType('Array');
   </pre>

   <h5>curring--柯里化P97</h5>
   <pre>
       var curryingModel = function(fn) {
           var args = [];
           return function() {
               if (arguments.length === 0) {
                   return fn.applay(this, args);
               } else {
                   args = args.concat(arguments);
                   return arguments.callee;
               }
           }
       }
   </pre>
   <pre>
       var currying = function(fn) {
           var args = [];
           return function() {
               if (arguments.length === 0) {
                   return fn.apply(this, args);
               } else {
                   Array.prototype.push.apply(args, arguments);
                   return arguments.callee;
               }
           }
       }
       cost = function(){
                  var sum = 0;
                  for (var i = 0, len = arguments.length; i < len; i++) {
                      sum += arguments[i];
                  }
                  return sum;
              }
       var ca = currying(cost);
       console.log('cost'+cost);
       ca(100);
       ca(200);
       console.group('curring柯里化');
          console.log(ca());
       console.groupEnd();
   </pre>

   <h5>事件节流：对于频繁触发而又没必要次次回应的事件，给个限制，减少触发次数P139</h5>
   <pre>
       function throttle(fn, interval) {
           var doing = false;

           return function() {
               if (doing) {
                   return;
               }
               doing = true;
               fn.apply(this, arguments);
               setTimeout(function() {
                   doing = false;
               }, interval);
           }
       }

       window.onresize = throttle(function(){
           console.log('execute');
       }, 1000);
   </pre>

   <h5>正确获取浏览器可用区域的宽高P161</h5>
   <pre>
       var w = window.innerWidth ||
           document.documentElement.clientWidth ||
           document.body.clientWidth;

       var h = window.innerHeight ||
           document.documentElement.clientHeight ||
           document.body.clientHeight;

       console.log("宽度是" + w + ";" + '高度是' + h);
   </pre>

   <h5>事件监听器P174</h5>
   <div id="tang">woshishui</div>
   <pre>
       var eventHandler={
           addHandler:function(element,type,func){
               if(window.addEventListener){
                   element.addEventListener(type,func,false);
               }else if(element.detachEvent){
                   element.attachEvent('on'+type,func);
               }else{
                   element['on'+type]=func;
               }
           },
           removerHandler:function(element,type,func){
               if(window.removeEventListener){
                   element.removeEventListener(type,func,false);
               }else if(element.detachEvent){
                   element.detachEvent('on'+type,func);
               }else{
                   element['on'+type]=null;
               }
           }
       }
       function showmsg(){
           alert("hello");
       }
       var btn = document.getElementById("tang");
       eventHandler.addHandler(btn,"click",showmsg);
   </pre>
</body>
</html>